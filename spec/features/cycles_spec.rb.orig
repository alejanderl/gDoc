require 'spec_helper'
<<<<<<< .merge_file_2VIpI7

 
   
=======
  
>>>>>>> .merge_file_wRDSB9
describe "GET /cycles" do
  user = FactoryGirl.create(:user)  
  before do
<<<<<<< .merge_file_2VIpI7
    visit new_user_session_path  
    fill_in "user_email", :with => user.email
    fill_in "user_password", :with => "secret"
   
    click_button "Sign in"
    save_and_open_page
=======
    create_sample_cycles
    create_sample_users
 end
>>>>>>> .merge_file_wRDSB9

   
  end
  
  it "display cycles" do
    visit cycles_path
    page.should have_content("Cycle 1")
  end

  describe "POST /cycles" do
#    before do
#    create_sample_cycles
#    create_sample_users
#     end
 
   it "Create cycles" do
      visit cycles_path
      click_link "New Cycle"
      user_login("admin@example.com", "admin123")
      fill_in "cycle_title", :with  => "Geek-art"
      click_button "Create Cycle"
      page.should have_content("Geek-art")
      page.should have_content("Cycle was successfully created.")

    end

<<<<<<< .merge_file_2VIpI7
    it "update cycles" do
      cycle = FactoryGirl.create_list(:cycle,8)
=======
  it "Update cycles" do
      user_login("admin@example.com", "admin123")
>>>>>>> .merge_file_wRDSB9
      visit "/cycles/1"
      click_link "Edit"
     # save_and_open_page
      fill_in "cycle_title", :with  => "Geek-art 2"
      click_button "Update Cycle"
      page.should have_content("Geek-art 2")
      page.should have_content("Cycle was successfully updated")

    end

   it "destroy cycles" do
      user_login("admin@example.com", "admin123")
      visit "/cycles"
#      save_and_open_page
      page.should have_content("Cycle 1") {
#        alert = page.driver.browser.switch_to.alert
#        expect { alert.accept }.to change(Cycle, :count).by(-1)}
        expect { click_link('Destroy') }.to change(Cycle, :count).by(-1)}
      save_and_open_page
    end

    pending it "Select date from calender / datepicker" do
      visit "/cycles/1"
      click_link "Edit"
#      click_field "date"

    end

    pending "check taxonomy fiedl" do 
      page.should have_content "taxonomy"
#      fill_in 
    end

 end


end
